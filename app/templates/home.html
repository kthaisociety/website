{% extends "base.html" %}
{% load social_share %}
{% load static %}

{% block title_plain %}{{ app_name }}{% endblock %}

{% block pre_body %}
    {% if articles %}
        <div class="jumbotron jumbotron-fluid d-flex mb-0" style="background-image: linear-gradient(to bottom, rgba(38,54,66,0.6) 0%,rgba(38,54,66,0.6) 100%), url('{{ articles.0.picture.url }}'); background-size: cover; background-position: center center; min-height: 500px;">
            <div class="container my-auto text-center text-lg-left">
                <h1 class="display-4 mb-5 mb-lg-4 text-white">{{ articles.0.title }}</h1>
                <p class="lead text-white">{{ articles.0.lead }}</p>
                <a class="link-unstyled" href="{% url "news_article" articles.0.created_at.year articles.0.created_at.month articles.0.created_at.day articles.0.slug %}">
                    <button type="button" class="btn btn-main mb-2">Read more</button>
                </a>
            </div>
        </div>
    {% endif %}
    {% comment %}
        {% if articles %}
            <div class="container-fluid px-0">
                <div id="news-carousel" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        {% for article in articles %}
                            <li data-target="#news-carousel" data-slide-to="{{ forloop.counter0 }}" {% if forloop.counter0 == 0 %}class="active"{% endif %}></li>
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner text-center bg-info" role="listbox">
                        {% for article in articles %}
                            <div class="carousel-item carousel-darken {% if forloop.counter0 == 0 %}active{% endif %}" style="background-image: url('{{ article.picture.url }}'); background-size: cover;">
                                <!-- Desktop version -->
                                <div class="carousel-caption d-none d-lg-flex d-xl-flex">
                                    <div class="text-left">
                                        <h1 class="carousel-title-lg">{{ article.title }}</h1>
                                        <p class="carousel-body-lg">{{ article.body_plaintext|truncatewords:50 }}</p>
                                        <a class="link-unstyled" href="{{ article.url }}">
                                            <button type="button" class="btn btn-main btn-lg carousel-button-lg"><p class="mb-1">Read more</p></button>
                                        </a>
                                    </div>
                                </div>
                                <!-- Mobile version -->
                                <div class="carousel-caption d-flex d-lg-none h-100 align-items-center justify-content-center">
                                    <div>
                                        <h1 class="carousel-title">{{ article.title }}</h1>
                                        <p class="carousel-body">{{ article.body_plaintext|truncatewords:15 }}</p>
                                        <a class="link-unstyled" href="{% url "news_article" article.created_at.year article.created_at.month article.created_at.day article.slug %}">
                                            <button type="button" class="btn btn-main btn-lg carousel-button-lg"><p class="mb-1">Read more</p></button>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#news-carousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#news-carousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        {% endif %}
        {% endcomment %}
{% endblock %}

{% block in_body %}
    <div class="jumbotron jumbotron-fluid mb-5">
        <div class="container mt-3 mb-3 pl-5 pr-5 pl-md-0 pr-md-0">
            <div class="row">
                <div class="col-md-2 w-25 ml-auto mr-auto mb-4 mb-md-0 pr-md-4">
                    <img src="{% static 'img/logo_square_plain.png' %}" alt="KTHAIS" class="w-100">
                </div>
                <div class="col-md-10">
                    <h2 class="text-center text-md-left text-main mb-4">Welcome to KTH AI Society</h2>
                    <p class="text-center text-md-left mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi lobortis consequat nisi, in accumsan est dapibus at. Proin dignissim imperdiet ante ut venenatis. Phasellus a leo non libero scelerisque laoreet quis eu lorem. Donec sollicitudin turpis ultrices, aliquam nisi non, cursus nibh. Fusce faucibus est vulputate, aliquet mauris in, scelerisque eros. Curabitur sodales justo ac sem vehicula aliquam. Nulla a metus ipsum.</p>
                    {% if not request.user.is_authenticated %}
                        <a class="link-unstyled mt-3 mb-0 d-block" href="{% url "user_signup" %}"><p class="text-main mb-0">Register now <i class="fas fa-arrow-right ml-1"></i></p></a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        {% if articles|length > 2 or articles|length > 1 and events %}
            <div class="row mt-0 mb-0">
                <div class="col-md-6">
                    <div class="card flex-md-row mt-0 mb-0 shadow-sm h-md-250">
                        <div class="card-body d-flex flex-column align-items-start">
                            <strong class="d-inline-block mb-2 text-orange"><a class="link-unstyled" href="{% url "news_articles" %}">Article</a></strong>
                            <h3 class="pb-2 line-max-2">
                                <a class="text-dark link-unstyled" href="{% url "news_article" articles.1.created_at.year articles.1.created_at.month articles.1.created_at.day articles.1.slug %}">{{ articles.1.title }}</a>
                            </h3>
                        <div class="mb-1 text-muted">{{ articles.1.created_at|date:"M j" }}</div>
                            <p class="card-text mb-auto">{{ articles.1.description_short }}</p>
                            <a class="link-colour" href="{% url "news_article" articles.1.created_at.year articles.1.created_at.month articles.1.created_at.day articles.1.slug %}">Read more</a>
                        </div>
                        <a href="{% url "news_article" articles.1.created_at.year articles.1.created_at.month articles.1.created_at.day articles.1.slug %}">
                            <img class="card-img-right flex-auto d-none d-lg-block" style="width: 200px; height: 250px;" src="{{ articles.1.picture.crop.200x250 }}">
                        </a>
                    </div>
                </div>
                {% if events %}
                    <div class="col-md-6">
                        <div class="card flex-md-row mt-0 mb-0 shadow-sm h-md-250">
                            <div class="card-body d-flex flex-column align-items-start">
                                <strong class="d-inline-block mb-2 text-orange"><a class="link-unstyled" href="{% url "events_events" %}">Event</a></strong>
                                <h3 class="pb-2 line-max-2">
                                    <a class="text-dark link-unstyled" href="{{ events.0.url }}">{{ events.0.name }}</a>
                                </h3>
                            <div class="mb-1 text-muted">{{ events.0.starts_at|date:"M j" }}</div>
                                <p class="card-text mb-auto">{{ events.0.description_short }}</p>
                                <a class="link-colour" href="{{ events.0.url }}">Check it out</a>
                            </div>
                            <a href="{{ events.0.url }}">
                                <img class="card-img-right flex-auto d-none d-lg-block" style="width: 200px; height: 250px;" src="{{ events.0.picture.crop.200x250 }}">
                            </a>
                        </div>
                    </div>
                {% else %}
                    <div class="col-md-6">
                        <div class="card flex-md-row mt-0 mb-0 shadow-sm h-md-250">
                            <div class="card-body d-flex flex-column align-items-start">
                                <strong class="d-inline-block mb-2 text-orange"><a class="link-unstyled" href="{% url "news_articles" %}">Article</a></strong>
                                <h3 class="pb-2 line-max-2">
                                    <a class="text-dark link-unstyled" href="{% url "news_article" articles.2.created_at.year articles.2.created_at.month articles.2.created_at.day articles.2.slug %}">{{ articles.2.title }}</a>
                                </h3>
                            <div class="mb-1 text-muted">{{ articles.2.created_at|date:"M j" }}</div>
                                <p class="card-text mb-auto">{{ articles.2.description_short }}</p>
                                <a class="link-colour" href="{% url "news_article" articles.2.created_at.year articles.2.created_at.month articles.2.created_at.day articles.2.slug %}">Read more</a>
                            </div>
                            <a href="{% url "news_article" articles.2.created_at.year articles.2.created_at.month articles.2.created_at.day articles.2.slug %}">
                                <img class="card-img-right flex-auto d-none d-lg-block" style="width: 200px; height: 250px;" src="{{ articles.2.picture.crop.200x250 }}">
                            </a>
                        </div>
                    </div>
                {% endif %}
            </div>
        {% endif %}
    </div>
    <div class="container">
        <div class="row mt-4 mb-0">
            <div class="col-md-12">
                <p class="mb-0">Hello</p>
            </div>
        </div>
    </div>
    <div class="jumbotron jumbotron-fluid mt-5 mb-0 bg-main-s2 text-white">
        <div class="container container-fluid">
            Hello
        </div>
    </div>
{% endblock %}
